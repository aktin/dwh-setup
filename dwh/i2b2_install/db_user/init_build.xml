<?xml version="1.0" encoding="UTF-8"?>
<project name="Various Database Jobs" basedir=".">

	<property environment="env" />

	<property file="./db.properties" />

	<target name="init"  description="Prepare for build">
		<path id="classpath">
			<pathelement location="../postgresql-9.2-1002.jdbc4.jar"/>
		</path>
	</target>

	<!-- ================================================================================================= -->

	<target name="create_POSTGRESQL_users" depends="init, create_pm_user, create_hive_user, create_im_user, create_work_user, create_meta_user, create_crc_user">
	</target>
	<target name="create_pm_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_pm_user.sql" />
		</sql>
	</target>
	<target name="create_hive_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_hive_user.sql" />
		</sql>
	</target>
	<target name="create_im_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_im_user.sql" />
		</sql>
	</target>
	<target name="create_work_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_work_user.sql" />
		</sql>
	</target>
	<target name="create_meta_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_meta_user.sql" />
		</sql>
	</target>
	<target name="create_crc_user" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/create_crc_user.sql" />
		</sql>
	</target>

	<target name="drop_POSTGRESQL_users" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/drop_POSTGRESQL_users.sql" />
		</sql>
	</target>

</project>


