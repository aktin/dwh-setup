# go to temp directory to extract original source
cd /var/tmp
# current revision is --revision 324
svn checkout http://community.i2b2.org/repos/i2b2/trunk/related/i2b2Wizard/trunk
mv trunk i2b2Wizard
cd i2b2Wizard


# remove svn directories
find . -name .svn -type d -print0 | xargs -0 -n1 rm -rf

# convert scripts
find . -name "*.sh" -type f -exec dos2unix {} \;
chmod +x wizard.sh

# link packages
rmdir packages
ln -s /vagrant/packages packages

### now make changes to the files

cp scripts/os_versions/Ubuntu_14.04.sh scripts/os_versions/Debian_7.8.sh


#cp scripts/i2b2_versions/i2b2_1.7.03a.sh scripts/i2b2_versions/i2b2_1.7.04.sh
#cp -r config/ds-config/1.7.03a/ config/ds-config/1.7.04
#cp -r config/ds-config/inserts/1.7.03a/ config/ds-config/inserts/1.7.04


# apply patches
patch -p1 < /vagrant/i2b2Wizard.patch


 
# create diff for i2b2Wizard
cd /var/tmp
svn checkout http://community.i2b2.org/repos/i2b2/trunk/related/i2b2Wizard/

diff -ru i2b2Wizard /opt/i2b2Wizard > /vagrant/i2b2Wizard.test.patch


# apply patches
patch -p1 < /vagrant/i2b2Wizard.patch


# copy sources
cp /vagrant/*.zip ./packages/
