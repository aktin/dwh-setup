<?xml version="1.0" encoding="UTF-8"?>
<!--
$Id: data_build.xml,v 1.2 2010/04/05 13:52:11 lcp5 Exp $
-->
<project name="Ontology/Metadata data" basedir=".">

	<property environment="env" />

	<property file="./db.properties" />

	<!-- =================================================================== -->
	<!-- 								INIT 								 -->
	<!-- =================================================================== -->
	<target name="init"  description="Prepare for build">
		<path id="classpath">
			<pathelement location="../postgresql-9.2-1002.jdbc4.jar"/>
		</path>
	</target>

	<!-- =================================================================== -->
	<!-- 			DATABASE SETUP TARGETS						 			 -->
	<!-- =================================================================== -->

	<target name="drop_meta" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/drop_meta_tables.sql" />	
		</sql>
	</target>

	<target name="db_metadata_load_data_access_aktin" depends="init">
		<echo message="Loading metadata" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue">
			<transaction src="./scripts/table_access_insert_data_atkin.sql" />
		</sql>
	</target>

	<target name="db_metadata_load_data" depends="init">
		<echo message="Loading metadata -- may take a while; over 10 min" />
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue">
			<transaction src="./scripts/schemes_insert_data.sql" />
			<transaction src="./scripts/table_access_insert_data.sql" />
			<transaction src="./scripts/i2b2_metadata_insert_data.sql" />
			<transaction src="./scripts/i2b2_metadata_visitDetails.sql" />
			<transaction src="./scripts/i2b2_metadata_demographics.sql" /> 
		</sql>
	</target>

	<target name="load_aktin_meta_insert" depends="init">
		<sql driver="${db.driver}" url="${db.url}" userid="${db.username}" password="${db.password}" classpathref="classpath" onerror="continue" print="true">
			<transaction src="./scripts/i2b2metadata.table_access.sql" />
			<transaction src="./scripts/i2b2metadata.i2b2.sql" />
		</sql>
	</target>

</project>


